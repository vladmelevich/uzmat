# üê≥ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VPS —Å–µ—Ä–≤–µ—Ä —Å Ubuntu/Debian
- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- IP —Å–µ—Ä–≤–µ—Ä–∞: `109.199.127.149`

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
mkdir -p /var/www/uzmat
cd /var/www/uzmat
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã
git clone <your-repo-url> .
# –ò–õ–ò –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ scp/sftp
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞
cp env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

**–í–∞–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤ .env:**
- `SECRET_KEY` - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á (–∫–æ–º–∞–Ω–¥–∞: `python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"`)
- `DEBUG=False` - –¥–ª—è production (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
- `ALLOWED_HOSTS` - –¥–æ–±–∞–≤—å—Ç–µ IP —Å–µ—Ä–≤–µ—Ä–∞ –∏ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `localhost,127.0.0.1,109.199.127.149,uzmat.uz,www.uzmat.uz`)
- `CSRF_TRUSTED_ORIGINS` - –¥–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω —Å http –∏ https (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://uzmat.uz,https://www.uzmat.uz`)
- `SITE_URL` - –ø–æ–ª–Ω—ã–π URL —Å–∞–π—Ç–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ Telegram (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://uzmat.uz`)
- `DB_PASSWORD` - –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –ë–î
- `MYSQL_ROOT_PASSWORD` - –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è root MySQL
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather –≤ Telegram
- `TELEGRAM_CHANNEL_ID` - ID –∫–∞–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `@Uzmat_uz`)
- `TELEGRAM_ENABLED=True` - –≤–∫–ª—é—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram

### 4. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏
chmod +x deploy.sh backup.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
./deploy.sh
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–∑–¥–∞—Å—Ç –±—ç–∫–∞–ø –ë–î
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
3. –û–±–Ω–æ–≤–∏—Ç –∫–æ–¥
4. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã
5. –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
6. –ó–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# 1. –ë—ç–∫–∞–ø –ë–î
./backup.sh

# 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥
git pull  # –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose build
docker-compose up -d

# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web python manage.py migrate

# 5. –°–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏–∫—É
docker-compose exec web python manage.py collectstatic --noinput
```

## üì¶ –ë—ç–∫–∞–ø—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –≤—Ä—É—á–Ω—É—é

```bash
./backup.sh
```

–ë—ç–∫–∞–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `backups/` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∂–∞—Ç–∏–µ–º.

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –†–∞—Å–ø–∞–∫—É–π—Ç–µ –±—ç–∫–∞–ø
gunzip backups/backup_YYYYMMDD_HHMMSS.sql.gz

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
docker exec -i uzmat_mysql mysql -u root -p${MYSQL_ROOT_PASSWORD} ${DB_NAME} < backups/backup_YYYYMMDD_HHMMSS.sql
```

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose logs -f

# –¢–æ–ª—å–∫–æ Django
docker-compose logs -f web

# –¢–æ–ª—å–∫–æ MySQL
docker-compose logs -f db

# –¢–æ–ª—å–∫–æ Nginx
docker-compose logs -f nginx
```

### –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# Django –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec web bash

# MySQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec db bash

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É Django
docker-compose exec web python manage.py shell
docker-compose exec web python manage.py createsuperuser
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞/–ó–∞–ø—É—Å–∫

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
docker-compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
docker-compose up -d

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞

```bash
docker-compose ps
docker stats
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Volumes (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)

- `mysql_data` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- `./media` - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Ñ–æ—Ç–æ, –∞–≤–∞—Ç–∞—Ä—ã)
- `./staticfiles` - —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- `./backups` - –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–í–∞–∂–Ω–æ:** –í—Å–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ –∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤!

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 22/tcp  # SSH
sudo ufw enable
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL (Let's Encrypt)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ certbot
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
```

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
1. –û–±–Ω–æ–≤–∏—Ç–µ `nginx.conf` (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ HTTPS —Å–µ–∫—Ü–∏—é)
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ `ALLOWED_HOSTS` –∏ `CSRF_TRUSTED_ORIGINS` –≤ `.env`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `docker-compose restart nginx`

### 3. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤:

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–±—ç–∫–∞–ø –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00)
0 3 * * * cd /var/www/uzmat && ./backup.sh
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs web

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose exec web env | grep DB_
```

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ MySQL
docker-compose ps db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ MySQL
docker-compose logs db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker-compose exec web python manage.py dbshell
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose exec web python manage.py showmigrations

# –û—Ç–∫–∞—Ç–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec web python manage.py migrate app_name migration_name

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec web python manage.py makemigrations
```

### –û—á–∏—Å—Ç–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ)

```bash
# ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!
docker-compose down -v
docker system prune -a
```

## üìû –î–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:

- HTTP: `http://109.199.127.149`
- –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL: `https://109.199.127.149`

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ production

- [ ] –ò–∑–º–µ–Ω–µ–Ω `SECRET_KEY` –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
- [ ] `DEBUG=False` –≤ `.env`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –ë–î
- [ ] –î–æ–±–∞–≤–ª–µ–Ω IP/–¥–æ–º–µ–Ω –≤ `ALLOWED_HOSTS`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π—Ä–≤–æ–ª
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞–Ω —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Django

## üéØ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker-compose ps
```

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
docker stats
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Docker –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.docker.com/)
- [Docker Compose –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.docker.com/compose/)
- [Django deployment checklist](https://docs.djangoproject.com/en/stable/howto/deployment/checklist/)







# üåê –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –¥–æ–º–µ–Ω–∞ –∫ VPS —Å–µ—Ä–≤–µ—Ä—É

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ —Å sayt.uz –∫ VPS –Ω–∞ Contabo

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è NS –∑–∞–ø–∏—Å–µ–π (–∫–æ—Ç–æ—Ä—É—é –≤—ã –≤–∏–¥–∏—Ç–µ) –ù–ï –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Cloudflare!

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Cloudflare (NS –∑–∞–ø–∏—Å–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ Cloudflare):

1. **–í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Cloudflare**: [dash.cloudflare.com](https://dash.cloudflare.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"DNS"** ‚Üí **"Records"**
4. –î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å–∏ (—Å–º. –Ω–∏–∂–µ)

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ DNS –æ—Ç sayt.uz:

1. **–í–µ—Ä–Ω–∏—Ç–µ NS –∑–∞–ø–∏—Å–∏ –Ω–∞ sayt.uz** (–æ—á–∏—Å—Ç–∏—Ç–µ –ø–æ–ª—è Cloudflare –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è NS)
2. **–ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "DNS –∑–∞–ø–∏—Å–∏"** –∏–ª–∏ **"A-–∑–∞–ø–∏—Å–∏"** –≤ –ø–∞–Ω–µ–ª–∏ sayt.uz
3. –î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å–∏ (—Å–º. –Ω–∏–∂–µ)

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ A-–∑–∞–ø–∏—Å–∏ (–¥–æ–±–∞–≤–ª—è–π—Ç–µ –≤ Cloudflare –ò–õ–ò sayt.uz):

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ A-–∑–∞–ø–∏—Å–∏:

```
–¢–∏–ø –∑–∞–ø–∏—Å–∏: A
–ò–º—è: @ (–∏–ª–∏ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ, –∏–ª–∏ –≤–∞—à–¥–æ–º–µ–Ω.uz)
–ó–Ω–∞—á–µ–Ω–∏–µ (IP): 109.199.127.149
TTL: 3600

–¢–∏–ø –∑–∞–ø–∏—Å–∏: A
–ò–º—è: www
–ó–Ω–∞—á–µ–Ω–∏–µ (IP): 109.199.127.149
TTL: 3600
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤):

```
–¢–∏–ø –∑–∞–ø–∏—Å–∏: A
–ò–º—è: *
–ó–Ω–∞—á–µ–Ω–∏–µ (IP): 109.199.127.149
TTL: 3600
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ nginx.conf –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS, –æ–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `nginx.conf`:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É** (—á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Contabo –∏–ª–∏ SSH)
2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ nginx.conf**:

```nginx
server {
    listen 80;
    server_name –≤–∞—à–¥–æ–º–µ–Ω.uz www.–≤–∞—à–¥–æ–º–µ–Ω.uz;  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
    
    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
}
```

3. **–î–ª—è HTTPS** (–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞):

```nginx
server {
    listen 443 ssl http2;
    server_name –≤–∞—à–¥–æ–º–µ–Ω.uz www.–≤–∞—à–¥–æ–º–µ–Ω.uz;
    
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;
    
    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
}
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Django

–í —Ñ–∞–π–ª–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–∏—Ç–µ:

```bash
ALLOWED_HOSTS=–≤–∞—à–¥–æ–º–µ–Ω.uz,www.–≤–∞—à–¥–æ–º–µ–Ω.uz,109.199.127.149
CSRF_TRUSTED_ORIGINS=http://–≤–∞—à–¥–æ–º–µ–Ω.uz,https://–≤–∞—à–¥–æ–º–µ–Ω.uz,http://www.–≤–∞—à–¥–æ–º–µ–Ω.uz,https://www.–≤–∞—à–¥–æ–º–µ–Ω.uz
```

### –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Let's Encrypt)

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ DNS –∑–∞–ø–∏—Å–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è (–æ–±—ã—á–Ω–æ 15-60 –º–∏–Ω—É—Ç):

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ certbot
sudo apt update
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d –≤–∞—à–¥–æ–º–µ–Ω.uz -d www.–≤–∞—à–¥–æ–º–µ–Ω.uz

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
```

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx
sudo systemctl restart nginx
# –ò–õ–ò –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker
docker-compose restart nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status nginx
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS –∑–∞–ø–∏—Å–∏** (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 24 —á–∞—Å–æ–≤):
   ```bash
   nslookup –≤–∞—à–¥–æ–º–µ–Ω.uz
   dig –≤–∞—à–¥–æ–º–µ–Ω.uz
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://–≤–∞—à–¥–æ–º–µ–Ω.uz`
   - –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL: `https://–≤–∞—à–¥–æ–º–µ–Ω.uz`

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

‚ö†Ô∏è **–í—Ä–µ–º—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS**: –ò–∑–º–µ–Ω–µ–Ω–∏—è DNS –∑–∞–ø–∏—Å–µ–π –º–æ–≥—É—Ç –∑–∞–Ω—è—Ç—å –æ—Ç 15 –º–∏–Ω—É—Ç –¥–æ 24 —á–∞—Å–æ–≤

‚ö†Ô∏è **–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–∏—Å—ã:
- [whatsmydns.net](https://www.whatsmydns.net/)
- [dnschecker.org](https://dnschecker.org/)

‚ö†Ô∏è **Firewall**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ Contabo –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã 80 –∏ 443

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

#### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS –∑–∞–ø–∏—Å–∏: `nslookup –≤–∞—à–¥–æ–º–µ–Ω.uz`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ Contabo
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ nginx: `docker-compose logs nginx`

#### –û—à–∏–±–∫–∞ SSL:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `sudo certbot certificates`

#### 502 Bad Gateway:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Django –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker-compose ps`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs web`

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- **sayt.uz**: +99871 200 60 02, +99894 345 60 02
- **Contabo**: —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è [my.contabo.com](https://my.contabo.com/)


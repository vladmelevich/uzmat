{% load static %}
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî Uzmat</title>
  <link rel="icon" type="image/svg+xml" href="{% static 'uzmat/logo-uzmat.svg' %}">
  {% include 'uzmat/theme-init.html' %}
  <link rel="stylesheet" href="{% static 'uzmat/styles.css' %}">
  <script defer src="{% static 'uzmat/app.js' %}"></script>
</head>

<body class="uz-body">

  <!-- Floating Header -->
  <header class="uz-header">
    <div class="uz-header-inner">
      <a href="{% url 'uzmat:index' %}" class="uz-logo">
        <img src="{% static 'uzmat/logo-uzmat.svg' %}" alt="Uzmat" class="uz-logo-mark">
        <span>Uzmat</span>
      </a>

      {% include 'uzmat/nav.html' %}

      <div class="uz-flex">
        {% include 'uzmat/country-selector.html' %}
        {% include 'uzmat/create-ad-button.html' %}
        <button class="uz-btn uz-btn-ghost uz-hidden-mobile" data-theme-toggle>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
        </button>
        {% include 'uzmat/user-avatar.html' %}
      </div>
    </div>
  </header>

  <main class="uz-container" style="max-width: 600px;">

    <h1 style="font-size: 24px; font-weight: 700; margin-bottom: 24px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>

    <div class="uz-flex-col" style="gap: 16px;">

      <!-- Country and Currency -->
      <div class="uz-card">
        <div class="uz-flex" style="justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <div>
            <div style="font-weight: 600; margin-bottom: 4px;">–°—Ç—Ä–∞–Ω–∞ –∏ —è–∑—ã–∫</div>
            <div style="font-size: 13px; color: var(--uz-text-dim);">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –∏ —è–∑—ã–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
          </div>
        </div>

        <div class="uz-grid" style="grid-template-columns: repeat(2, 1fr); gap: 8px;">
          <button class="uz-btn uz-btn-outline uz-settings-country-btn" data-country="kz" data-currency="‚Ç∏ KZT" data-lang="kk" style="justify-content: flex-start; font-weight: 500;">
            <img src="{% static 'uzmat/kazah.svg' %}" alt="KZ" class="uz-settings-flag" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
            <span style="display:none; margin-right: 8px;">üá∞üáø</span>
            <span>
              <div style="font-weight: 600;">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</div>
              <div style="font-size: 12px; color: var(--uz-text-dim);">‚Ç∏ KZT</div>
            </span>
          </button>
          <button class="uz-btn uz-btn-ghost uz-settings-country-btn" data-country="uz" data-currency="—Å—É–º UZS" data-lang="uz" style="justify-content: flex-start; font-weight: 500;">
            <img src="{% static 'uzmat/uzbek.svg' %}" alt="UZ" class="uz-settings-flag" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
            <span style="display:none; margin-right: 8px;">üá∫üáø</span>
            <span>
              <div style="font-weight: 600;">–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</div>
              <div style="font-size: 12px; color: var(--uz-text-dim);">—Å—É–º UZS</div>
            </span>
          </button>
          <button class="uz-btn uz-btn-ghost uz-settings-country-btn" data-country="ru" data-currency="‚ÇΩ RUB" data-lang="ru" style="justify-content: flex-start; font-weight: 500;">
            <img src="{% static 'uzmat/russia.svg' %}" alt="RU" class="uz-settings-flag" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
            <span style="display:none; margin-right: 8px;">üá∑üá∫</span>
            <span>
              <div style="font-weight: 600;">–†–æ—Å—Å–∏—è</div>
              <div style="font-size: 12px; color: var(--uz-text-dim);">‚ÇΩ RUB</div>
            </span>
          </button>
          <button class="uz-btn uz-btn-ghost uz-settings-country-btn" data-country="by" data-currency="Br BYN" data-lang="be" style="justify-content: flex-start; font-weight: 500;">
            <img src="{% static 'uzmat/bel.svg' %}" alt="BY" class="uz-settings-flag" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block';">
            <span style="display:none; margin-right: 8px;">üáßüáæ</span>
            <span>
              <div style="font-weight: 600;">–ë–µ–ª–∞—Ä—É—Å—å</div>
              <div style="font-size: 12px; color: var(--uz-text-dim);">Br BYN</div>
            </span>
          </button>
        </div>
      </div>

      <!-- Appearance -->
      <div class="uz-card">
        <div class="uz-flex" style="justify-content: space-between; align-items: center;">
          <div>
            <div style="font-weight: 600; margin-bottom: 4px;">–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
            <div style="font-size: 13px; color: var(--uz-text-dim);">–°–≤–µ—Ç–ª–∞—è –∏–ª–∏ —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞</div>
          </div>
          <button class="uz-btn uz-btn-outline" data-theme-toggle>–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
        </div>
      </div>

      <!-- Profile Verification -->
      <div class="uz-card uz-show-mobile">
        <div class="uz-flex" style="justify-content: space-between; align-items: center;">
          <div>
            <div style="font-weight: 600; margin-bottom: 4px;">–ì–∞–ª–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è</div>
            <div style="font-size: 13px; color: var(--uz-text-dim);">–û—Ñ–æ—Ä–º–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è</div>
          </div>
          {% if user.is_verified_active %}
            <span title="–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å" style="display:inline-flex; align-items:center; gap:8px; padding: 8px 12px; border-radius: 999px; border:1px solid var(--uz-border); background: var(--uz-bg-card); font-size: 13px; font-weight: 700;">
              {% include 'uzmat/verified-check.html' with u=user %}
              –ì–∞–ª–æ—á–∫–∞
            </span>
          {% else %}
            <a href="{% url 'uzmat:verify_info' %}" class="uz-btn uz-btn-primary" style="font-size: 13px; padding: 8px 16px;">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              –û—Ñ–æ—Ä–º–∏—Ç—å
            </a>
          {% endif %}
        </div>
      </div>

      <!-- Account -->
      <div class="uz-card">
        <div class="uz-flex" style="justify-content: space-between; align-items: center;">
          <div>
            <div style="font-weight: 600; margin-bottom: 4px;">–ê–∫–∫–∞—É–Ω—Ç</div>
            <div style="font-size: 13px; color: var(--uz-text-dim);">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π</div>
          </div>
          <form method="post" action="{% url 'uzmat:logout' %}">
            {% csrf_token %}
            <button class="uz-btn uz-btn-outline"
              style="color: var(--uz-danger); border-color: rgba(239, 68, 68, 0.2);">–í—ã–π—Ç–∏</button>
          </form>
        </div>
      </div>

    </div>

  </main>

  {% include 'uzmat/footer.html' %}

  <!-- Mobile Navigation -->
  <nav class="uz-bottom-nav uz-show-mobile">
    <a href="{% url 'uzmat:index' %}" class="uz-bottom-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      <span>–ì–ª–∞–≤–Ω–∞—è</span>
    </a>
    <a href="{% url 'uzmat:chats' %}" class="uz-bottom-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
      <span>–ß–∞—Ç—ã</span>
    </a>
    <a href="{% url 'uzmat:create_ad' %}" class="uz-bottom-item" style="color: var(--uz-primary);">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="16"></line>
        <line x1="8" y1="12" x2="16" y2="12"></line>
      </svg>
      <span>–°–æ–∑–¥–∞—Ç—å</span>
    </a>
    <a href="{% url 'uzmat:onboarding' %}" class="uz-bottom-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </a>
    <a href="{% url 'uzmat:settings' %}" class="uz-bottom-item active">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"></circle>
        <path
          d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
        </path>
      </svg>
      <span>–ú–µ–Ω—é</span>
    </a>
  </nav>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω—ã/—è–∑—ã–∫–∞
      const countryButtons = document.querySelectorAll('.uz-settings-country-btn');
      
      countryButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const lang = this.getAttribute('data-lang');
          const country = this.getAttribute('data-country');
          
          if (lang && window.i18n) {
            // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫)
            countryButtons.forEach(btn => {
              btn.classList.remove('uz-btn-outline');
              btn.classList.add('uz-btn-ghost');
            });
            this.classList.remove('uz-btn-ghost');
            this.classList.add('uz-btn-outline');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω—É
            localStorage.setItem('selected_country', country);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —è–∑—ã–∫ –ú–ì–ù–û–í–ï–ù–ù–û (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
            window.i18n.setLanguage(lang);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥
            setTimeout(() => {
              if (window.showToast) {
                const langNames = {
                  'ru': '–†—É—Å—Å–∫–∏–π',
                  'uz': 'O\'zbek',
                  'kk': '“ö–∞–∑–∞“õ',
                  'be': '–ë–µ–ª–∞—Ä—É—Å–∫–∞—è'
                };
                window.showToast(`–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ ${langNames[lang] || lang}`, 'success');
              }
            }, 50);
          }
        });
      });
      
      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      const savedCountry = localStorage.getItem('selected_country');
      if (savedCountry) {
        const savedButton = document.querySelector(`.uz-settings-country-btn[data-country="${savedCountry}"]`);
        if (savedButton) {
          savedButton.classList.remove('uz-btn-ghost');
          savedButton.classList.add('uz-btn-outline');
          // –£–±–∏—Ä–∞–µ–º outline —Å –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫
          countryButtons.forEach(btn => {
            if (btn !== savedButton) {
              btn.classList.remove('uz-btn-outline');
              btn.classList.add('uz-btn-ghost');
            }
          });
        }
      }
    });
  </script>

</body>

</html>